<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            xmlns:xamify="clr-namespace:Xamify.UberWebViewLib;assembly=Xamify.UberWebViewLib"
            Title="TownFish"
             x:Class="TownFish.App.Pages.BrowserPage">
  <ContentPage.Resources>
    <ResourceDictionary>
      <Style x:Key="BottomNavBtnStyle" TargetType="Button">
        <Setter Property="TextColor" Value="#8b8b8b" />
        <Setter Property="BackgroundColor" Value="White" />
        <Setter Property="FontSize" Value="10" />
        <Setter Property="HorizontalOptions" Value="Fill" />
      </Style>
      <Style x:Key="TopNavBtnStyle" TargetType="Button">
        <Setter Property="TextColor" Value="#686868" />
        <Setter Property="BackgroundColor" Value="#e8e8e8" />
        <Setter Property="FontSize" Value="14" />
      </Style>
    </ResourceDictionary>
  </ContentPage.Resources>
  <Grid RowSpacing="0">
    <Grid.RowDefinitions>
      <RowDefinition Height="auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="auto"/>
    </Grid.RowDefinitions>
    <!-- Top Menu Bar -->
    <Grid RowSpacing="0">
      <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
      </Grid.RowDefinitions>
      <Grid x:Name="topBar" IsVisible="{Binding IsTopBarVisible}" BackgroundColor="#787878" Padding="10,10,10,10">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="auto" />
          <ColumnDefinition />
          <ColumnDefinition Width="auto"/>
          <ColumnDefinition Width="10" />
          <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>
        <Image Source="{Binding TopBarLeftLabel}" Grid.Column="0" HorizontalOptions="Center" WidthRequest="20" HeightRequest="20">
          <Image.GestureRecognizers>
            <TapGestureRecognizer Command="{Binding TopBarLeftCommand}"/>
          </Image.GestureRecognizers>
        </Image>
        <Label VerticalOptions="Center" HorizontalOptions="Center" Grid.Column="1" Text="{Binding PageTitle}" />
        <Image Source="{Binding TopBarRightLabel}" Grid.Column="2" HorizontalOptions="Center" WidthRequest="20" HeightRequest="20">
          <Image.GestureRecognizers>
            <TapGestureRecognizer Command="{Binding TopBarRightCommand}"/>
          </Image.GestureRecognizers>
        </Image>
        <Image Source="{Binding TopBarRight1Label}" Grid.Column="4" HorizontalOptions="Center" WidthRequest="20" HeightRequest="20">
          <Image.GestureRecognizers>
            <TapGestureRecognizer Command="{Binding TopBarRight1Command}"/>
          </Image.GestureRecognizers>
        </Image>
      </Grid>
      <Grid Grid.Row="1" BackgroundColor="#e8e8e8" ColumnSpacing="10" Padding="10, 0" IsVisible="{Binding IsTopBarSubVisible}">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="auto" />
          <ColumnDefinition Width="auto" />
          <ColumnDefinition Width="auto" />
          <ColumnDefinition Width="auto" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="auto" />
        </Grid.ColumnDefinitions>
        <Button Text="{Binding TopAction1Label}"
                Command="{Binding TopAction1Command}"
                Style="{StaticResource TopNavBtnStyle}" />
        <Button Grid.Column="1"
                Text="{Binding TopAction2Label}"
                Command="{Binding TopAction2Command}"
                Style="{StaticResource TopNavBtnStyle}" />
        <Button Grid.Column="2"
                Text="{Binding TopAction3Label}"
                Command="{Binding TopAction3Command}"
                Style="{StaticResource TopNavBtnStyle}" />
        <Image Source="{Binding TopActionMoreLabel}" Grid.Column="5" HorizontalOptions="Center" WidthRequest="20" HeightRequest="20">
          <Image.GestureRecognizers>
            <TapGestureRecognizer Command="{Binding TopActionMoreCommand}"/>
          </Image.GestureRecognizers>
        </Image>
      </Grid>
    </Grid>
    <xamify:UberWebView x:Name="webView" Grid.Row="1" Source="{Binding Source}"  VerticalOptions="Fill" HorizontalOptions="Fill" />
    <!-- Bottom Menu Bar -->
    <Grid Grid.Row="2" BackgroundColor="#F2F2F2" Padding="10" IsVisible="{Binding IsBottomBarVisible}">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>
      <Image Source="{Binding BottomAction1Label}" HorizontalOptions="Center" WidthRequest="30" HeightRequest="30">
        <Image.GestureRecognizers>
          <TapGestureRecognizer Command="{Binding BottomAction1Command}"/>
        </Image.GestureRecognizers>
      </Image>
      <Image Source="{Binding BottomAction2Label}" Grid.Column="1" HorizontalOptions="Center" WidthRequest="30" HeightRequest="30">
        <Image.GestureRecognizers>
          <TapGestureRecognizer Command="{Binding BottomAction2Command}"/>
        </Image.GestureRecognizers>
      </Image>
      <Image Source="{Binding BottomAction3Label}" Grid.Column="2" HorizontalOptions="Center" WidthRequest="30" HeightRequest="30">
        <Image.GestureRecognizers>
          <TapGestureRecognizer Command="{Binding BottomAction3Command}"/>
        </Image.GestureRecognizers>
      </Image>
      <Image Source="{Binding BottomAction4Label}" Grid.Column="3" HorizontalOptions="Center" WidthRequest="30" HeightRequest="30">
        <Image.GestureRecognizers>
          <TapGestureRecognizer Command="{Binding BottomAction4Command}"/>
        </Image.GestureRecognizers>
      </Image>
      <Image Grid.Column="4" Source="{Binding BottomAction5Label}" HorizontalOptions="Center" WidthRequest="30" HeightRequest="30">
        <Image.GestureRecognizers>
          <TapGestureRecognizer Command="{Binding BottomAction5Command}"/>
        </Image.GestureRecognizers>
      </Image>
    </Grid>
    <Grid x:Name="loadingPanel" IsVisible="{Binding IsLoading}" Opacity="0.7" Grid.Row="1" BackgroundColor="Black">
      <ActivityIndicator VerticalOptions="Center" HorizontalOptions="Center" IsRunning="{Binding IsLoading}" />
    </Grid>
  </Grid>
</ContentPage>